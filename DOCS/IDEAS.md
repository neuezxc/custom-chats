# CHATPAGE  

Main Goal:  
A Character AI–style chat interface where users can talk to AI characters. The chat experience should feel immersive, persistent, and responsive. Built with Next.js + Tailwind for UI, Zustand + localStorage for persistence, and OpenRouter/Gemini for live AI responses.  

---

## THE NAVBAR  
Got it ✅ — I’ll improve your writing, make it cleaner, and expand on details where it helps with clarity and context.

Here’s your **Navbar** component rewritten and polished:

---

### Navbar

The navigation bar provides quick access to key actions and context for the chat interface.

* **Back Button**

  * Navigates back to the homepage.

* **Character Name (centered)**

  * Displays the name of the currently selected character.

* **Menu (right side)**
  * **API Key Settings**
    * Allows the user to configure API access.
    * Users can select a provider (e.g., **Gemini** or **OpenRouter**).
    * Includes input fields for storing API keys securely.
    * Provides a dropdown or list of available models for the selected provider. see `DOCS/LISTS_MODELS.md`
  * **New Chat**
    * Starts a fresh conversation.
    * Clears the current chat history to reset the session with the selected character.

---


Do you want to continue listing the rest of the components (Gallery, Chats Container, SuperInput), and I’ll capture them in the same structured way?


## GALLERY COMPONENTS  
*(We won’t make changes here yet, but context for later)*  

---


## Chat Components

*These components manage and display all chat interactions.*

* **Chat Container**

  * A scrollable vertical list that displays the conversation history.
  * Auto-scrolls to the bottom when new messages arrive, ensuring the latest message is always visible.
  * New messages appear with a smooth fade-in animation for better UX.

* **Character Chat Bubble**

  * Displays responses generated by the AI character.
  * Supports **Markdown rendering** (bold, italics, headings, lists, code blocks, links, etc.).
  * Shows a **typing indicator** (e.g., animated dots) while the character’s response is still streaming.

* **User Chat Bubble**

  * Displays messages sent by the user.
  * Supports **Markdown rendering** for consistent formatting with AI messages.

* **Message Options (hover menu) \[Planned Feature]**

  * Quick actions accessible when hovering over a message:

    * **Copy**: Copy the message text to the clipboard.
    * **Regenerate**: Re-request the last AI response.
    * **Delete**: Remove a message from the chat history.

---


## Super Input (Message Composer)

The **message composer** allows the user to write and send messages, configure models, and monitor connection status.

### Elements

* **Textarea**

  * Primary input field where the user types their message.
  * Expands dynamically to accommodate multi-line input.

* **Send Button**

  * Sends the message to the chat.
  * Disabled if the input field is empty **or** if no API provider is configured.
  * Supports keyboard shortcut (e.g., **Enter** to send, **Shift+Enter** for new line).

* **Model Selector**

  * Dropdown menu to select which model to use for this chat session (see `@DOCS/LISTS_MODELS.md`).
  * Overrides the default model set in **API Settings**.
  * Useful for switching between different LLMs mid-conversation.

* **Status Indicator**

  * A small colored dot with tooltip that reflects API configuration status:

    * **Green** = API configured & connected.
    * **Red** = No API key provided.
    * **Yellow** = Connected, but error fetching models.

* **(Planned) Extra Controls**

  * **Stop Generating** button to interrupt the AI while it is still streaming a response.
  * **Temperature Slider** to adjust creativity / randomness of responses.
  * (Optional future controls such as max tokens, response style, etc.).

---

## TECH + STATE NOTES  
- Zustand store to manage:  
    - Current chat messages.  
    - API key state.  
    - Active character.  
    - Current selected model.  

- localStorage:  
    - Persist chats per character.  
    - Persist last selected model.  
    - Persist API key (optional, can be cleared from settings).  

---